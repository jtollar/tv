!function(t){function e(e){for(var s,l,r=e[0],a=e[1],c=e[2],d=0,p=[];d<r.length;d++)l=r[d],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&p.push(o[l][0]),o[l]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s]);for(u&&u(e);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,r=1;r<n.length;r++){var a=n[r];0!==o[a]&&(s=!1)}s&&(i.splice(e--,1),t=l(l.s=n[0]))}return t}var s={},o={0:0},i=[];function l(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=s,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(n,s,function(e){return t[e]}.bind(null,s));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var r=window.webpackJsonp=window.webpackJsonp||[],a=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=a;i.push([2,2]),n()}({2:function(t,e,n){"use strict";n.r(e);var s=n(0),o=n.n(s),i={stop:l,play:function(t){if(l(),o.a.isSupported()){const e=new o.a;e.loadSource(t),e.attachMedia(video),e.on(o.a.Events.MANIFEST_PARSED,(function(){video.play()}))}else video.canPlayType("application/x-mpegURL")&&(video.src=t,video.addEventListener("loadedmetadata",(function(){video.play()})))}};function l(){video.pause(),video.removeAttribute("src"),video.load(),window.hls&&hls.stopLoad()}class r{static getJSON(t){if("string"==typeof t)if(window.DOMParser)t=(new DOMParser).parseFromString(t,"text/xml");else{const e=new ActiveXObject("Microsoft.XMLDOM");e.async=!1,t=e.loadXML(t)}const e=r._getXmlJsonByXml(t);return r._getJsonByXmlJson(e)}static _getJsonByXmlJson(t){if(Array.isArray(t))t=t.map(t=>r._getJsonByXmlJson(t));else{let e=Object.keys(t);if(e=e.filter(t=>!["#text"].includes(t)),!(e.length>0))return t["#text"];{delete t["#text"];let e=[];if(t.hasOwnProperty("@attributes")){e=Object.keys(t["@attributes"]);for(const e in t["@attributes"])t[e]=t["@attributes"][e]}delete t["@attributes"];for(const n in t)e.includes(n)||(t[n]=r._getJsonByXmlJson(t[n]))}}return t}static _getXmlJsonByXml(t){var e={};if(1==t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(var n=0;n<t.attributes.length;n++){var s=t.attributes.item(n);e["@attributes"][s.nodeName]=s.nodeValue}}}else 3==t.nodeType&&(e=t.nodeValue);if(t.hasChildNodes())for(var o=0;o<t.childNodes.length;o++){var i=t.childNodes.item(o),l=i.nodeName;if(void 0===e[l])e[l]=r._getXmlJsonByXml(i);else{if(void 0===e[l].push){var a=e[l];e[l]=[],e[l].push(a)}e[l].push(r._getXmlJsonByXml(i))}}return e}}var a=r;class c{static is(t){return t&&"object"==typeof t&&!Array.isArray(t)}static mergeDeep(t,...e){if(!e.length)return t;const n=e.shift();if(c.is(t)&&c.is(n))for(const e in n)c.is(n[e])?(t[e]?t[e]=Object.assign({},t[e]):Object.assign(t,{[e]:{}}),c.mergeDeep(t[e],n[e])):Object.assign(t,{[e]:n[e]});return c.mergeDeep(t,...e)}}var u=c;class d{static async fetchByCors({requestUrl:t,requestOptions:e={},responseFormat:n="text"},s="corsAnywhere"){let{url:o,requestOptions:i}={corsAnywhere:{url:"https://cors-anywhere.herokuapp.com/",requestOptions:{headers:{origin:null}}}}[s];i=u.mergeDeep(i,e);const l={text:t=>t.text(),json:t=>t.json(),formData:t=>t.formData(),blob:t=>t.blob(),arrayBuffer:t=>t.arrayBuffer()},r=l[n]||l.text;return{data:await fetch(o+t,i).then(r),success:!0}}static async fetchJsonByXml(t){return t=encodeURIComponent(t),await d.fetchByCors({requestUrl:"https://feed2json.org/convert?url="+t,responseFormat:"json"})}}var p=d;function f(){function t(t){t.stopPropagation();let n=t.target;for(;"LI"!==n.tagName;)n=n.parentElement;document.querySelectorAll("li:not(.category)").forEach(e),n.classList.add("active");const s=streams[n.getAttribute("data-id")];if(document.querySelectorAll("iframe, video").forEach(t=>{t.setAttribute("src",""),t.style.display="none"}),document.querySelector('head link[rel*="icon"]').setAttribute("href",s.icon),document.querySelector("head title").innerText=s.title,s.iframe)i.stop(),s.iframe.setAttribute("src",s.url),s.iframe.style.display="block";else{if(!s.video)throw new Error("no player found");i.play(s.url),s.video.style.display="block"}}function e(t){t.classList.remove("active")}document.querySelectorAll("ul li:not(.category)").forEach((e,n)=>e.addEventListener("click",t))}function m(){function t({items:t=[],title:e="",isPlaying:n=!1}={}){const s=document.querySelector("div.playlist");function o(t){const e=new Date(t);return{clock:[e.getHours(),e.getMinutes()].map((t,e)=>0===e?n(t,"hide"):n(t)).join(":"),date:[e.getDate(),e.getMonth()+1,(e.getFullYear()+"").slice(2,4)].map((t,e)=>0===e?n(t,"hide"):n(t)).concat([tv.config.i18n.weekday[e.getDay()]]).map((t,e)=>0===e?t:1===e?"."+t:2===e?'<span class="small-hide">.'+t+"</span>":3===e?'<span class="small-hide">, '+t+"</span>":t).join("")};function n(t,e=""){return t<10?'<span class="'+e+'">0</span>'+t:t}}0!==t.length?s.innerHTML=`<table class="playlist theme-white-on-transparent" id="playlist">\n                <tr class="head">\n                    <td colspan="2">\n                        <span class="small-title">${e}</span>\n                    </td>\n                    <td colspan="1">\n                        <input type="button" value="kurz" onclick="document.querySelector('#playlist').classList.toggle('small');" />\n                    </td>\n                </tr>\n                <tr class="head-sub">\n                    <td>\n                        <span class="small-hide">Uhrzeit</span>\n                    </td>\n                    <td>\n                        \x3c!-- cant use small-hide in td itself, cause not display, applies css to 1th cell, instead 1th cell --\x3e\n                        <span class="small-hide">Datum</span>\n                    </td>\n                    <td>Titel</td>\n                </tr>\n            `+t.sort((t,e)=>e.published.localeCompare(t.published)).map(({"media:group":{"media:thumbnail":{url:t}},published:e,updated:s,title:i,url:l},r,a)=>`\n                <tr class="${n&&0===r?"play":""}">\n                    <td class="td-1">${o(e).clock}</td>\n                    <td class="td-2">${o(e).date}</td>\n                    <td class="td-3" title="${i}"><span class="title">${i}</span></td>\n                </tr>\n            `).join("")+"</table>":s.innerHTML=""}document.querySelectorAll("li:not(.category)[data-id]").forEach((e,n)=>{e.addEventListener("mouseleave",(function(e){y(!1);const n=document.querySelector("li[data-id].active");if(n){n.getAttribute("data-id");const e=n.getAttribute("data-id");streams[e].url.includes("www.youtube.com")&&streams[e].playlist&&t({items:streams[e].playlist,title:streams[e].title,isPlaying:!0})}})),e.addEventListener("mouseenter",(function(e){e.stopPropagation();let n=e.target;for(;"LI"!==n.tagName;)n=n.parentElement;const s=n.getAttribute("data-id"),o=streams[s].url;o.includes("www.youtube.com")?streams[s].playlist?(t({items:streams[s].playlist,title:streams[s].title,isPlaying:n.classList.contains("active")}),y(!0)):(async()=>{const e=/list=(.+)/gi.exec(o)[1],{success:i,data:l}=await p.fetchByCors({requestUrl:"https://www.youtube.com/feeds/videos.xml?playlist_id="+e}),{feed:{entry:r}}=a.getJSON(l);streams[s].playlist=r,t({items:streams[s].playlist,title:streams[s].title,isPlaying:n.classList.contains("active")}),y(!0)})():y(!1)}))})}function y(t=null){const e=document.querySelector("div.show_right");return!0===t?(console.log("show"),void e.classList.remove("hide")):!1===t?(console.log("hide"),void e.classList.add("hide")):void e.classList.toggle("hide")}window.tv={buildUI:function(t){console.log("buildUI got called"),function(t="#clock"){console.log("updateClock got called");const e=document.querySelector(t),n=function(){const t=new Date,n=t.getHours(),s=t.getMinutes();e.innerText=n+":"+(s<10?"0"+s:s)};n(),setInterval(n,6e4)}(),function(t){Object.keys(t).forEach((function(e){const n=t[e],s=document.createElement("li");null===n?s.innerHTML="<hr>":(s.setAttribute("data-id",e),s.innerHTML=`\n                <div class="left">\n                    <img class="tv-icon ${n.iconClass||""}"\n                           src="${n.icon||"https://toppng.com/uploads/preview/lay-icon-play-icon-11563266312mklxafh8gy.png"}"\n                     />\n                </div>\n                <span class="title">${n.title}</span>\n                `);let o=null;if(n.list){let t=n.list.split("."),e=t.map(t=>`ul > li.category[name="${t}"]`);t.unshift("div.ul-container"),e.unshift("div.ul-container");for(let n=0;n<t.length;n++){const s=e.slice(0,n+1).join(" ");if(null===document.querySelector(s)){const s=e.slice(0,n).join(" ");let o=document.createElement("li");o.setAttribute("class","category active"),o.setAttribute("name",t[n]),o.innerHTML=`\n                        <div><span class="title">${tv.config.i18n[t[n]]||t[n]}</span></div>\n                        <ul></ul>\n                    `;document.querySelector(s+"> ul").appendChild(o)}}const s=e.join(" ");o=document.querySelector(s).querySelector("ul")}else o=document.querySelector("div.ul-container > ul");o.appendChild(s)}))}(t),f(),document.querySelectorAll("ul li.category").forEach((t,e)=>t.addEventListener("click",(function(t){t.stopPropagation();let e=t.target;for(;"LI"!==e.tagName;)e=e.parentElement;e.classList.toggle("active")}))),m(),document.querySelector("div.show_right div.show-toggle").addEventListener("click",()=>y(null))},autostartByQueryString:function(){let t=new URLSearchParams(window.location.search).get("autostart")||window.location.hash.substr(1);t="string"==typeof t?decodeURI(t):t;let e=document.querySelector(`li[data-id="${t}"]`);e&&e.click()},config(t,e){let n=window,s=t.split(".");for(let t=0;t<s.length;t++){let o=s[t];n[o]=n[o]||{},t===s.length-1?n[o]=e:n=n[o]}}}}});